<?php

declare(strict_types=1);

namespace Mammatus\Cron\Generated;

use Mammatus\Cron\Action;

// phpcs:disable
/**
 * @internal
 * Autogenerated file, do not edit. Changes will be overwritten on the next composer (install|update)
 */
abstract readonly class AbstractList
{
    /** @return iterable<string, Action> */
    final protected function crons(): iterable
    {
{% for action in actions %}
        /**
        * @see \{{ action.class }}
        *
        * @psalm-suppress MixedArgument Because we addOns argument comes from json_decode, Psalm doesn't like it. TODO: Drop the need for json_encode/json_decode
        */
        yield '{% if action.splitOut == true %}kubernetes{% else %}internal{% endif %}-{{ action.cron.name }}-{{ action.class|replace({'\\': '-'}) }}' => new Action(
{% if action.splitOut == true %}
            type: 'kubernetes',
{% else %}
            type: 'internal',
{% endif %}
            name: '{{ action.cron.name }}',
            schedule: '{{ action.cron.schedule }}',
            class: \{{ action.class }}::class,
            addOns: \json_decode('{{ action.cron.addOns|json_encode()|raw }}', true),
        );
{% endfor %}
    }
}
